<ng-container *rxLet="viewState$; let vs">
  <app-side-drawer
    [withBackdrop]="vs.isMobile"
    [opened]="!vs.isMobile || vs.sideDrawerOpen"
    (openedChange)="sideDrawerOpenToggle$.next(false)"
  >
    <nav class="navigation">
      <a class="navigation--header" *ngIf="!vs.isMobile">
        <picture>
          <img
            class="logo-img"
            src="/assets/svgs/logo.svg"
            title="HubMovies"
            alt="HubMovies"
            width="150"
            height="150"
            loading="lazy"
          />
        </picture>
      </a>
      <h2 class="navigation--headline">Discover</h2>
      <a
        class="navigation--link"
        [class.active]="vs.activeRoute === '/movies/popular'"
        (click)="navTo('/movies', 'popular')"
      >
        <div class="navigation--menu-item">
          <svg
            class="navigation--menu-item-icon"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            />
          </svg>
          Popular
        </div>
      </a>
      <a
        class="navigation--link"
        [class.active]="vs.activeRoute === '/movies/top_rated'"
        (click)="navTo('/movies', 'top_rated')"
      >
        <div class="navigation--menu-item">
          <svg
            class="navigation--menu-item-icon"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path d="M0 0h24v24H0z" fill="none" />
            <path
              d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"
            />
          </svg>
          Top Rated
        </div>
      </a>
      <a
        class="navigation--link"
        [class.active]="vs.activeRoute === '/movies/upcoming'"
        (click)="navTo('/movies', 'upcoming')"
      >
        <div class="navigation--menu-item">
          <svg
            class="navigation--menu-item-icon"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path
              d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V10h16v11zm0-13H4V5h16v3z"
            />
          </svg>
          Upcoming
        </div>
      </a>
      <h2 class="navigation--headline">Genres</h2>
      <ng-container *rxLet="genres$; let genres">
        <a
          *ngFor="let genre of genres; trackBy: trackByGenre"
          class="navigation--link"
          [class.active]="vs.activeRoute === '/genre/' + genre.id"
          (click)="navTo('/genre', genre.id)"
        >
          <div class="navigation--menu-item">
            <svg
              class="navigation--menu-item-icon"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path d="M0 0h24v24H0V0z" fill="none" />
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"
              />
              <circle cx="12" cy="12" r="5" />
            </svg>
            {{ genre.name }}
          </div>
        </a>
      </ng-container>
      <picture class="tmdb-mark">
        <source
          srcset="/assets/svgs/tmdbgreen.svg"
          media="(prefers-color-scheme: dark)"
        />
        <source
          srcset="/assets/svgs/tmdb.svg"
          media="(prefers-color-scheme: light)"
        />
        <img width="300" height="118" alt="The Movie Database" src="" />
      </picture>
    </nav>
  </app-side-drawer>
  <div class="content-wrapper">
    <div class="app-toolbar">
      <app-hamburger-button
        class="app-toolbar--action"
        (click)="sideDrawerOpenToggle$.next(!vs.sideDrawerOpen)"
        *ngIf="vs.isMobile"
      >
      </app-hamburger-button>
      <div class="app-toolbar--widget-container">
        <app-search-bar (search)="searchMovie($event)"></app-search-bar>
        <a
          *ngIf="!vs.loggedIn; else signOut"
          title="sign in"
          (click)="authEffects.approveRequestToken()"
        >
          <svg
            class="icon"
            enable-background="new 0 0 20 20"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <g><rect fill="none" height="20" width="20" x="0" /></g>
            <g>
              <path
                d="M10,4v1h6v10h-6v1h6c0.55,0,1-0.45,1-1V5c0-0.55-0.45-1-1-1H10z"
              />
              <polygon
                points="9.5,6.5 8.79,7.21 11.09,9.5 3,9.5 3,10.5 11.09,10.5 8.79,12.79 9.5,13.5 13,10"
              />
            </g>
          </svg>
        </a>
        <app-dark-mode-toggle> </app-dark-mode-toggle>
        <ng-template #signOut>
          <a title="sign out" (click)="onSignOut()">
            <svg
              class="icon"
              enable-background="new 0 0 24 24"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <g><path d="M0,0h24v24H0V0z" fill="none" /></g>
              <g>
                <path
                  d="M17,8l-1.41,1.41L17.17,11H9v2h8.17l-1.58,1.58L17,16l4-4L17,8z M5,5h7V3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h7v-2H5V5z"
                />
              </g>
            </svg>
          </a>
        </ng-template>
      </div>
    </div>
    <div class="content">
      <ng-content></ng-content>
    </div>
  </div>
</ng-container>
